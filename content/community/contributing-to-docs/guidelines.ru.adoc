---
Title: Руководство по созданию документации
Weight: 50
---

:author: likhobory
:email: likhobory@mail.ru

:toc:
:toc-title: Оглавление

:experimental:

Для лучшего понимания того, как работать с нашими файлами документации, вам необходимо как минимум иметь общее представление о link:https://gohugo.io[Hugo^] (движок рендеринга) и быть знакомым с основными правилами синтаксиса link:https://asciidoctor.org/docs/user-manual[Asciidoc^] (используемый упрощённый язык разметки). Тем, кто заинтересован в улучшении внешнего вида сайта документации, рекомендуется ознакомиться с link:https://themes.gohugo.io/hugo-theme-learn[Learn^] (используемая в Hugo тема оформления).

Приведённые ниже пояснения - это просто краткое перечисление наиболее часто используемых синтаксических конструкций, а также несколько рекомендаций и правил, которых мы стараемся придерживаться.

В конце статьи <<Наиболее часто используемые разделы справочника по языку Asciidoc,даны ссылки>> на популярные справочные материалы по синтаксису Asciidoc.

== Размещение файлов

В основном все файлы, которые необходимо отредактировать, находятся в папке *content*. Здесь расположены основные разделы руководства, такие как *user* (Руководство пользователя), *admin* (Руководство администратора), *community* (Развитие проекта), *developer* (Руководство разработчика) и *blog* (Блог разработчиков).

При необходимости вы можете создавать новые каталоги и файлы внутри перечисленных разделов.
В данный момент Hugo использует https://gohugo.io/content-management/organization[пути к каталогам и файлам^] для создания контента. Сейчас мы не используем технологию  *Page Bundles*, хотя и планируем задействовать её в будущем.

== Именование файлов

В именах каталогов и файлов, используемых при создании страниц документации, мы стараемся использовать строчные буквы, без пробелов и специальных символов.

По сути, при присваивании имён каталогам и папкам мы придерживаемся того же алгоритма, которым Hugo создаёт конечный контент в каталоге *public*, чтобы не было существенной разницы между исходным файлами и конечными страницами документации. Такой способ именования файлов значительно облегчает управление контентом.

Даже если файлы и каталоги содержат пробелы и специальные символы, Hugo заменяет их символами тире. Например, путь к файлу *_Downloading & Installing_* в каталоге *_Installation Guide_* будет заменён на *_installation-guide/downloading-installing_*.


=== Именование файлов перевода

Для файлов перевода мы сохраняем английское имя файла (именно так Hugo получает информацию о том, что это
переведённые версии того же самого файла), но добавляем код языка перед расширением *_.adoc_*.

Таким образом, два последних файла в списке (испанский, русский) являются переводом первого файла (английский):

[source]
----
requirements.adoc
requirements.es.adoc
requirements.ru.adoc
----

{{% notice note %}}
Мы не используем формат *_requirements.en.adoc_* для английской версии файла.
Мы сохраняем язык по умолчанию (английский) без указания кода языка в имени файла.
{{% /notice %}}

== Заголовок файла

Каждый файл в формате Asciidoc начинается с заголовка, например:

[source]
---
title: Руководство по созданию документации
weight: 50
---

И хотя в заголовке может быть использовано https://gohugo.io/content-management/front-matter[множество различных переменных^], нам потребуются только две их них: *title* и *weight*.

* *title*  - определяет название статьи

* *weight*  - определяет позицию (вес) статьи в оглавлении, при помощи этой переменной можно указывать порядок следования статей в разделе

Мы используем нумерацию веса с шагом 10, таким образом будет легче найти неиспользуемый номер, если потребуется вставить новую страницу между двумя уже существующими.

== Атрибуты

link:https://asciidoctor.org/docs/user-manual/#attributes[Атрибуты^] Asciidoc оформляются в тексте двоеточиями, ниже перечислены некоторые атрибуты, которые можно использовать в начале файла, сразу после текста заголовка:

[discrete]
==== Рисование кнопок со специальным графическим оформлением:

[source]
----
:experimental: 

Этот атрибут включает возможность использования макросов, в частности макроса btn:[некий текст].
----

Это пример предложения, в котором указывается, что вы можете нажать  кнопку btn:[Сохранить] в пользовательском интерфейсе.

[discrete]
==== Установка базового каталога изображений:

[source]
----
:imagesdir: /images/ru/admin
----

К каталогу должен быть указан абсолютный путь (начиная с `/`), а не относительный (например, `../../images`).
В случае указания базового каталога ссылки на изображения можно задавать в следующем формате: 

[source]
----
image:Имя_файла.png[Альтернативный текст]
----

[discrete]
==== Вставка *оглавления*, автоматически сгенерированного из названий разделов файла:

[source]
----
:toc:
----

[discrete]
==== Указание *названия оглавления*, автоматически сгенерированного из названий разделов файла:

[source]
----
:toc-title: Название_оглавления
----

[discrete]
==== Указание *уровней оглавления*, автоматически сгенерированного из названий разделов файла:

[source]
----
:toclevels: 3
----
По умолчанию в оглавлении отображаются разделы первого и второго уровня.

== Специальные коды

Hugo использует link:https://gohugo.io/content-management/shortcodes[специалные коды^] для использования различных шаблонов:

[discrete]
==== Вставка *оглавления*, автоматически сгенерированного из имён файлов, находящихся в подкаталогах

Для этого используется специальный код, добавленный в индексный файл каталога (*_index.ru.adoc*), например:

[source]
----
{{%/* children depth="3" showhidden="true" */%}}
----

[discrete]
==== Вставка сообщений

При необходимости в текст могут быть вставлены оформленные сообщения различного типа:

* Информационное сообщение

[source]
----
{{%/* notice info */%}}
Пример информационного сообщения.
{{%/* /notice */%}}
----

{{% notice info %}}
Пример информационного сообщения.
{{% /notice %}}

* Примечание

[source]
----
{{%/* notice note */%}}
Пример примечания.
{{%/* /notice */%}}
----

{{% notice note %}}
Пример примечания.
{{% /notice %}}

* Совет

[source]
----
{{%/* notice tip */%}}
Пример совета.
{{%/* /notice */%}}
----

{{% notice tip %}}
Пример совета.
{{% /notice %}}

* Предупреждение

[source]
----
{{%/* notice warning */%}}
Пример предупреждения.
{{%/* /notice */%}}
----

{{% notice warning %}}
Пример предупреждения.
{{% /notice %}}

С полным списком специальных кодов, поддерживаемых темой Learn, можно ознакомиться link:https://learn.netlify.com/en/shortcodes[здесь^].

== Создание контента

При создании контента мы следуем этим правилам:

* Не писать текст на одной строке, если он длиннее ~80 символов. При обычных условиях Asciidoc игнорирует символ переноса строки и объединяет отдельные строки в единый абзац. 
Мы используем это правило для облегчения редактирование исходного кода на стандартной 80-символьной консоли. 
Если в конечном html-документе необходимо отобразить принудительный разрыв строки, необходимо использовать символы *" +"*  (пробел и плюс) в конце строки, либо разделять контент пустой строкой.

* Обрамлять пути, имена файлов, имена переменных и другие выражения, которые могут быть использованы в операциях  копирования-вставки косыми кавычками *(`)*:
 
Вот пример разметки, позволяющий легко скопировать `/некий/путь` в ваш редактор.


== Рекомендации

* Используйте обычные ссылки Asciidoc для навигации между файлами.

* На страницах всегда, где это возможно, используйте *относительные* ссылки. Это необходимо для того, чтобы переведённые страницы могли использовать ту же схему навигации, что и английские страницы. Так что ваши ссылки будут выглядеть так:

[source]
----
link:../../admin/my-page[текст ссылки].
----

При этом расширение файла в ссылке *не указывается*. +
При использовании ссылок на родительский каталог `..` используйте максимально короткий путь, при переходе по каталогам с помощью `..` никогда не заходите выше каталога *content* - это никогда не требуется.

* Для изображений используйте атрибут *:imagesdir:* (см. описание выше), а затем используйте ссылку на изображения без указания пути.

== Наиболее часто используемые разделы справочника по языку Asciidoc

* link:https://asciidoctor.org/docs/user-manual/#attributes[Атрибуты^]
* link:https://asciidoctor.org/docs/user-manual/#doc-header[Заголовки^]
* link:https://asciidoctor.org/docs/user-manual/#text-formatting[Форматирование текста^]
* link:https://asciidoctor.org/docs/user-manual/#unordered-lists[Списки^]
* link:https://asciidoctor.org/docs/user-manual/#ordered-lists[Нумерованные списки^]
* link:https://asciidoctor.org/docs/user-manual/#tables[Таблицы^]
* link:https://asciidoctor.org/docs/user-manual/#images[Изображения^]
* link:https://asciidoctor.org/docs/user-manual/#source-code-blocks[Подсветка кода^]
